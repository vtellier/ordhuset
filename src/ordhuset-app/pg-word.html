
<link rel="import" href="oh-style.html">
<link rel="import" href="../../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">

<dom-module id="pg-word">
  <template>
    <style include="oh-style">
      /* CSS rules for your element */
    </style>

    <app-route
      route="{{route}}"
      pattern="/:word/:def"
      data="{{routeData}}"
      tail="{{subroute}}">
    </app-route>
    
    <firebase-document
      id="wordDocument"
      path="/dictionary/{{routeData.word}}/defs/{{routeData.def}}"
      data="{{__wordEntity}}">
    </firebase-document>
    
    <h1>
      <iron-icon icon="svg-flag-icons:{{__wordEntity.lang}}"></iron-icon>
      {{routeData.word}} [{{__wordEntity.class}}]
    </h1>
    <p lang="{{__wordEntity.lang}}">{{__wordEntity.definition}}</p>
    
    <template is="dom-if" if="{{areEqual(__wordEntity.class,'verb')}}">
      <h2>Conjugation</h2>
      <table>
        <tr>
          <th>Infinitive</th>
          <th>Present</th>
          <th>Preterit</th>
          <th>Present perfect</th>
          <th>Imperative</th>
        </tr>
        <tr lang="{{__wordEntity.lang}}">
          <td>{{stringify(__wordEntity.conjugation.infinitive)}}</td>
          <td>{{stringify(__wordEntity.conjugation.present)}}</td>
          <td>{{stringify(__wordEntity.conjugation.preterit)}}</td>
          <td>{{stringify(__wordEntity.conjugation.present_perfect)}}</td>
          <td>{{stringify(__wordEntity.conjugation.imperative)}}</td>
        </tr>
      </table>
      <h3>Add a congujation</h3>
      <paper-dropdown-menu label="Tense">
        <paper-listbox slot="dropdown-content" class="dropdown-content">
          <paper-item>Infinitive</paper-item>
          <paper-item>Present</paper-item>
          <paper-item>Preterit</paper-item>
          <paper-item>Present perfect</paper-item>
          <paper-item>Imperative</paper-item>
        </paper-listbox>
      </paper-dropdown-menu>
      
      <paper-input label="Form" value="{{__form}}"></paper-input>
    </template>
    
    <template is="dom-if" if="{{areEqual(__wordEntity.class,'noun')}}">
      <h2>Declensions</h2>
      TO DO
    </template>
    
    <h2>Translations</h2>
    <ul class="{{_showIfNotEmpty(__wordEntity.translations)}}">
      <template is="dom-repeat" items="{{__wordEntity.translations}}" as="trans">
        <li><pre>{{stringify(trans,2)}}</pre></li>
      </template>
    </ul>
    
    <hr>
    <h2>Debug</h2>
    <pre>{{stringify(__wordEntity, 2)}}</pre>
  </template>

  <script>
    class PgWord extends OhUtils(Polymer.Element) {

      static get is() { return 'pg-word'; }

      static get properties() {
        return {
          route: {
            type: Object
          }
        }
      }
      
      _showIfResults(arrayStar) {
        return arrayStar.base.length==0 ? "hidden" : "";
      }

    }

    // Register the x-custom element with the browser
    customElements.define(PgWord.is, PgWord);
  </script>

</dom-module>