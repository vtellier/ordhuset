<link rel="import" href="../../bower_components/app-localize-behavior/app-localize-behavior.html">

<script>

LocalizationMixin = function(superClass) {

  return class extends Polymer.mixinBehaviors([Polymer.AppLocalizeBehavior], superClass) {

    connectedCallback() {
      super.connectedCallback();
      
      console.log("Add a listener to app-localize-resources-loaded");
      this.addEventListener('app-localize-resources-loaded', function(e){
        console.log('app-localize-resources-loaded', this.resources);
      }.bind(this));
      
      console.log('Calling this.loadResources()...');
      this.loadResources(this.resolveUrl('/static/locales.json'));
    }

    static get properties() {
      return {
        language: {
          value: 'es'
        },
        formats: {
          type: Object,
          value: function() {
            return {
              number: { MXN: { style: 'currency', currency: 'MXN' } }
            };
          }
        }
      }
    }

    getLabel(a) {
      
      console.log('getLabel() is called... this.resources is', this.resources);
      var args = Array.prototype.slice.call(arguments);
      var prop = args.join('');
      var label = prop;
      if(this.localize)
        label = this.localize(prop);

      return label;
    }

  }
}
</script>